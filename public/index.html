<!doctype html>
<html ng-app="shardalyzer-ui">
	<head>
		<title>Shardalyzer</title>
		<link rel="stylesheet" href="/bower_components/angular-chart.js/dist/angular-chart.css">
		<link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="/bower_components/seiyria-bootstrap-slider/css/bootstrap-slider.css">

		<script src="/bower_components/jquery/dist/jquery.min.js"></script>
		<script src="/bower_components/angular/angular.min.js"></script>
		<script src="/bower_components/Chart.js/Chart.min.js"></script>
		<script src="/bower_components/seiyria-bootstrap-slider/js/bootstrap-slider.js"></script>
		<script src="/bower_components/angular-bootstrap-slider/slider.js"></script>

		<script src="/bower_components/angular-chart.js/dist/angular-chart.min.js"></script>

		<link rel="stylesheet" href="stylesheets/chart-tooltip.css">
		<script src="js/chart-tooltip.js"></script>

		<script src="js/shardalyzer.js"></script>
		<script src="js/shardalyzer-ctrl.js"></script>
	</head>

	<body>
		<div>
			mongo:// <input type="text" ng-model="mongo.host" ng-model-options="{updateOn : 'change blur'}" />

			: <input type="text" ng-model="mongo.port" ng-model-options="{updateOn : 'change blur'}" />

			/ <select ng-controller="nsList" ng-model="mongo.selectedNS" ng-options="ns as ns for ns in mongo.nsList">
				<option value="">[namespace]</option>
			</select>
		</div>

		<div class="row" style="margin-top:20px;" style="height:300px;" ng-controller="updateCharts">
			<div ng-repeat="(shard, chunks) in chartmeta.data" class="col-md-4">
				<canvas id="doughnut_shard" class="chart chart-doughnut"
					options="chartmeta.options"
					data="chunks"
					labels="chartmeta.labels[shard]"
					colours="chartmeta.colors[shard]"></canvas>
			    <p align="center"><b>{{shard}} : {{chunks.length}}</b></p>
			    <div id="chartjs-tooltip-{{shard}}" class="chartjs-tooltip"></div>
			</div>
		</div>

		<div class="row" style="width:75%; margin:0 auto;" ng-controller="sliderControl">
			<slider ng-model="mongo.ui.slider"
				min="slidermeta.min"
				max="slidermeta.max"
				value="mongo.ui.slider"
				ticks="mongo.ui.errors"
				ticksLabels="slidermeta.ticklabels"
				ticks_snap_bounds="slidermeta.snap"
				formatter="slidermeta.formatter">
			</slider>
		</div>

		<div class="row" style="width:75%; margin:0 auto;">
			{{mongo.shardalyzer.changes[mongo.ui.slider].details.errmsg}}&nbsp;
		</div>

		<div class="row" style="width:75%; margin:0 auto;">
			<div class="btn-group" role="group" ng-controller="playControl">
				<button type="button" class="btn btn-primary" ng-click="playctrl.start();" value="|<">
					<span class="glyphicon glyphicon-fast-backward" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-info" ng-click="playctrl.fastforward();" value="<<">
					<span class="glyphicon glyphicon-backward" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-danger" ng-click="playctrl.forwardError();" value="! <">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-default" ng-click="playctrl.forward();" value="<">
					<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-default" ng-click="playctrl.back();" value=">">
					<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-danger" ng-click="playctrl.backError();" value="> !">
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-info" ng-click="playctrl.rewind();" value=">>">
					<span class="glyphicon glyphicon-forward" aria-hidden="true"></span>
				</button>
				<button type="button" class="btn btn-primary" ng-click="playctrl.end();" value=">|">
					<span class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span>
				</button>
			</div>
		</div>

		<div class="row" style="width:75%; margin:0 auto;" ng-controller="changelogControl">
			<select class="form-control" size=25 style="width:100%;" disabled
				ng-options="index as change | json for (index, change) in mongo.shardalyzer.changes"
				ng-model="mongo.ui.selectedchange">
			</select>
		</div>

	</body>

</html>